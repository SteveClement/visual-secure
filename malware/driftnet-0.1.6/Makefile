#
# Makefile:
# Makefile for driftnet.
#
# Copyright (c) 2001 Chris Lightfoot. All rights reserved.
# Email: chris@ex-parrot.com; WWW: http://www.ex-parrot.com/~chris/
#
# $Id: Makefile,v 1.34 2002/07/09 17:30:42 chris Exp $
#

#
# User-serviceable parts:
#

# Compiler to use.
#CC = gcc

# Basic compiler, linker flags; should not need any changes.
CFLAGS += -g -Wall
LDFLAGS += -g

# You might need these if libpcap is installed somewhere random.
CFLAGS += -I/usr/include/pcap
#LDFLAGS += -L/path/to/libpcap.so

# Required on Linux to get BSDish definitions of the TCP/IP structs.
CFLAGS += -D_BSD_SOURCE

# We always need the pcap and pthread libraries.
LDLIBS += -lpcap -lpthread

# Optional C compiler and linker flags. Typical driftnet builds have support
# for displaying captured images in an X window, and need the following flags:
CFLAGS  += `gtk-config --cflags`
LDLIBS  += -ljpeg -lungif `gtk-config --libs`

# Alternatively, you can build a version of driftnet which can only be used
# in `adjunct' mode as the back end for some other image-processing program. To
# use this, comment out the two preceding CFLAGS and LDLIBS lines and uncomment
# the following line:
#CFLAGS += -DNO_DISPLAY_WINDOW

# On systems with a C99 compiler, driftnet will use <stdint.h> for the
# definitions of types such as uint8_t. On other systems like Solaris, these
# are in <sys/types.h>, and you should uncomment this line.
#CFLAGS += -DUSE_SYS_TYPES_H

# On Solaris, it is necessary to link against -lposix4 for the definition of
# nanosleep; uncomment the below.
#LDLIBS  += -lposix4

# added 20020604 edobbs
# On BSD systems, may need to use /usr/local/include
#CFLAGS += -I/usr/local/include


#
# No user-serviceable parts below this point.
#

# Driftnet version.
VERSION = 0.1.6
CFLAGS += -DDRIFTNET_VERSION='"$(VERSION)"'

SUBDIRS = 

TXTS = README TODO COPYING CHANGES CREDITS driftnet.1 driftnet.1.in endian.c
SRCS = audio.c mpeghdr.c gif.c img.c jpeg.c png.c driftnet.c image.c \
       display.c playaudio.c connection.c media.c
HDRS = img.h driftnet.h mpeghdr.h
BINS = driftnet

OBJS = $(SRCS:.c=.o)

default: driftnet driftnet.1

driftnet:   depend $(OBJS)
	$(CC) -o driftnet $(OBJS) $(LDFLAGS) $(LDLIBS)

driftnet.1: driftnet.1.in Makefile
	( echo '.\" DO NOT EDIT THIS FILE-- edit driftnet.1.in instead' ; sed s/@@@VERSION@@@/$(VERSION)/ ) < driftnet.1.in > driftnet.1

endianness: endian
	./endian > endianness

endian: endian.c
	$(CC) $(CFLAGS) -o endian endian.c

%.o:    %.c Makefile endianness
	$(CC) $(CFLAGS) `cat endianness` -c -o $@ $<

clean:  nodepend
	rm -f *~ *.bak *.o core $(BINS) TAGS driftnet.1 endian endianness

tags:
	etags *.c *.h

tarball: nodepend $(SRCS) $(HDRS) $(TXTS)
	mkdir driftnet-$(VERSION)
	set -e ; for i in Makefile $(SRCS) $(HDRS) $(TXTS) ; do cp $$i driftnet-$(VERSION)/$$i ; done
	tar cvzf driftnet-$(VERSION).tar.gz driftnet-$(VERSION)
	rm -rf driftnet-$(VERSION)
	mv driftnet-$(VERSION).tar.gz ..
	
depend: endianness
	makedepend -- $(CFLAGS) `cat endianness` -- $(SRCS)
	touch depend
	rm -f Makefile.bak

nodepend:
	makedepend -- --
	rm -f depend Makefile.bak

# DO NOT DELETE

audio.o: /usr/include/string.h /usr/include/_types.h
audio.o: /usr/include/sys/_types.h /usr/include/sys/cdefs.h
audio.o: /usr/include/sys/_symbol_aliasing.h
audio.o: /usr/include/sys/_posix_availability.h /usr/include/machine/_types.h
audio.o: /usr/include/i386/_types.h /usr/include/Availability.h
audio.o: /usr/include/AvailabilityInternal.h /usr/include/strings.h
audio.o: /usr/include/secure/_string.h /usr/include/secure/_common.h
audio.o: driftnet.h /usr/include/sys/types.h /usr/include/sys/appleapiopts.h
audio.o: /usr/include/machine/types.h /usr/include/i386/types.h
audio.o: /usr/include/machine/endian.h /usr/include/i386/endian.h
audio.o: /usr/include/sys/_endian.h /usr/include/libkern/_OSByteOrder.h
audio.o: /usr/include/libkern/i386/_OSByteOrder.h /usr/include/sys/_structs.h
audio.o: /usr/include/sys/socket.h /usr/include/machine/_param.h
audio.o: /usr/include/i386/_param.h /usr/include/netinet/in.h
audio.o: /usr/include/stdint.h /usr/include/netinet6/in6.h
audio.o: /usr/include/arpa/inet.h /usr/include/sys/time.h /usr/include/time.h
audio.o: /usr/include/_structs.h /usr/include/sys/_select.h
audio.o: /usr/include/stdio.h /usr/include/secure/_stdio.h mpeghdr.h
mpeghdr.o: /usr/include/stdio.h /usr/include/sys/cdefs.h
mpeghdr.o: /usr/include/sys/_symbol_aliasing.h
mpeghdr.o: /usr/include/sys/_posix_availability.h /usr/include/Availability.h
mpeghdr.o: /usr/include/AvailabilityInternal.h /usr/include/_types.h
mpeghdr.o: /usr/include/sys/_types.h /usr/include/machine/_types.h
mpeghdr.o: /usr/include/i386/_types.h /usr/include/secure/_stdio.h
mpeghdr.o: /usr/include/secure/_common.h mpeghdr.h /usr/include/stdint.h
gif.o: img.h /usr/include/stdint.h /usr/include/stdio.h
gif.o: /usr/include/sys/cdefs.h /usr/include/sys/_symbol_aliasing.h
gif.o: /usr/include/sys/_posix_availability.h /usr/include/Availability.h
gif.o: /usr/include/AvailabilityInternal.h /usr/include/_types.h
gif.o: /usr/include/sys/_types.h /usr/include/machine/_types.h
gif.o: /usr/include/i386/_types.h /usr/include/secure/_stdio.h
gif.o: /usr/include/secure/_common.h
img.o: /usr/include/stdio.h /usr/include/sys/cdefs.h
img.o: /usr/include/sys/_symbol_aliasing.h
img.o: /usr/include/sys/_posix_availability.h /usr/include/Availability.h
img.o: /usr/include/AvailabilityInternal.h /usr/include/_types.h
img.o: /usr/include/sys/_types.h /usr/include/machine/_types.h
img.o: /usr/include/i386/_types.h /usr/include/secure/_stdio.h
img.o: /usr/include/secure/_common.h /usr/include/stdlib.h
img.o: /usr/include/sys/wait.h /usr/include/sys/signal.h
img.o: /usr/include/sys/appleapiopts.h /usr/include/machine/signal.h
img.o: /usr/include/i386/signal.h /usr/include/i386/_structs.h
img.o: /usr/include/sys/_structs.h /usr/include/sys/resource.h
img.o: /usr/include/machine/endian.h /usr/include/i386/endian.h
img.o: /usr/include/sys/_endian.h /usr/include/libkern/_OSByteOrder.h
img.o: /usr/include/libkern/i386/_OSByteOrder.h /usr/include/alloca.h
img.o: /usr/include/machine/types.h /usr/include/i386/types.h
img.o: /usr/include/string.h /usr/include/strings.h
img.o: /usr/include/secure/_string.h img.h /usr/include/stdint.h
jpeg.o: /usr/include/stdio.h /usr/include/sys/cdefs.h
jpeg.o: /usr/include/sys/_symbol_aliasing.h
jpeg.o: /usr/include/sys/_posix_availability.h /usr/include/Availability.h
jpeg.o: /usr/include/AvailabilityInternal.h /usr/include/_types.h
jpeg.o: /usr/include/sys/_types.h /usr/include/machine/_types.h
jpeg.o: /usr/include/i386/_types.h /usr/include/secure/_stdio.h
jpeg.o: /usr/include/secure/_common.h /usr/include/stdlib.h
jpeg.o: /usr/include/sys/wait.h /usr/include/sys/signal.h
jpeg.o: /usr/include/sys/appleapiopts.h /usr/include/machine/signal.h
jpeg.o: /usr/include/i386/signal.h /usr/include/i386/_structs.h
jpeg.o: /usr/include/sys/_structs.h /usr/include/sys/resource.h
jpeg.o: /usr/include/machine/endian.h /usr/include/i386/endian.h
jpeg.o: /usr/include/sys/_endian.h /usr/include/libkern/_OSByteOrder.h
jpeg.o: /usr/include/libkern/i386/_OSByteOrder.h /usr/include/alloca.h
jpeg.o: /usr/include/machine/types.h /usr/include/i386/types.h
jpeg.o: /usr/include/setjmp.h /usr/include/machine/setjmp.h
jpeg.o: /usr/include/i386/setjmp.h img.h /usr/include/stdint.h
driftnet.o: /usr/include/assert.h /usr/include/sys/cdefs.h
driftnet.o: /usr/include/sys/_symbol_aliasing.h
driftnet.o: /usr/include/sys/_posix_availability.h /usr/include/dirent.h
driftnet.o: /usr/include/_types.h /usr/include/sys/_types.h
driftnet.o: /usr/include/machine/_types.h /usr/include/i386/_types.h
driftnet.o: /usr/include/sys/dirent.h /usr/include/Availability.h
driftnet.o: /usr/include/AvailabilityInternal.h /usr/include/errno.h
driftnet.o: /usr/include/sys/errno.h /usr/include/pcap/pcap.h
driftnet.o: /usr/include/sys/types.h /usr/include/sys/appleapiopts.h
driftnet.o: /usr/include/machine/types.h /usr/include/i386/types.h
driftnet.o: /usr/include/machine/endian.h /usr/include/i386/endian.h
driftnet.o: /usr/include/sys/_endian.h /usr/include/libkern/_OSByteOrder.h
driftnet.o: /usr/include/libkern/i386/_OSByteOrder.h
driftnet.o: /usr/include/sys/_structs.h /usr/include/sys/time.h
driftnet.o: /usr/include/time.h /usr/include/_structs.h
driftnet.o: /usr/include/sys/_select.h /usr/include/pcap/bpf.h
driftnet.o: /usr/include/stdio.h /usr/include/secure/_stdio.h
driftnet.o: /usr/include/secure/_common.h /usr/include/netinet/in.h
driftnet.o: /usr/include/stdint.h /usr/include/sys/socket.h
driftnet.o: /usr/include/machine/_param.h /usr/include/i386/_param.h
driftnet.o: /usr/include/netinet6/in6.h /usr/include/arpa/inet.h
driftnet.o: /usr/include/limits.h /usr/include/machine/limits.h
driftnet.o: /usr/include/i386/limits.h /usr/include/i386/_limits.h
driftnet.o: /usr/include/sys/syslimits.h /usr/include/netinet/in_systm.h
driftnet.o: /usr/include/netinet/ip.h /usr/include/netinet/tcp.h
driftnet.o: /usr/include/ctype.h /usr/include/runetype.h /usr/include/fcntl.h
driftnet.o: /usr/include/sys/fcntl.h /usr/include/pthread.h
driftnet.o: /usr/include/pthread_impl.h /usr/include/sched.h
driftnet.o: /usr/include/stdlib.h /usr/include/sys/wait.h
driftnet.o: /usr/include/sys/signal.h /usr/include/machine/signal.h
driftnet.o: /usr/include/i386/signal.h /usr/include/i386/_structs.h
driftnet.o: /usr/include/sys/resource.h /usr/include/alloca.h
driftnet.o: /usr/include/string.h /usr/include/strings.h
driftnet.o: /usr/include/secure/_string.h /usr/include/unistd.h
driftnet.o: /usr/include/sys/unistd.h /usr/include/sys/select.h
driftnet.o: /usr/include/signal.h /usr/include/sys/stat.h driftnet.h
image.o: /usr/include/stdio.h /usr/include/sys/cdefs.h
image.o: /usr/include/sys/_symbol_aliasing.h
image.o: /usr/include/sys/_posix_availability.h /usr/include/Availability.h
image.o: /usr/include/AvailabilityInternal.h /usr/include/_types.h
image.o: /usr/include/sys/_types.h /usr/include/machine/_types.h
image.o: /usr/include/i386/_types.h /usr/include/secure/_stdio.h
image.o: /usr/include/secure/_common.h /usr/include/stdlib.h
image.o: /usr/include/sys/wait.h /usr/include/sys/signal.h
image.o: /usr/include/sys/appleapiopts.h /usr/include/machine/signal.h
image.o: /usr/include/i386/signal.h /usr/include/i386/_structs.h
image.o: /usr/include/sys/_structs.h /usr/include/sys/resource.h
image.o: /usr/include/machine/endian.h /usr/include/i386/endian.h
image.o: /usr/include/sys/_endian.h /usr/include/libkern/_OSByteOrder.h
image.o: /usr/include/libkern/i386/_OSByteOrder.h /usr/include/alloca.h
image.o: /usr/include/machine/types.h /usr/include/i386/types.h
image.o: /usr/include/string.h /usr/include/strings.h
image.o: /usr/include/secure/_string.h
display.o: /usr/include/stdio.h /usr/include/sys/cdefs.h
display.o: /usr/include/sys/_symbol_aliasing.h
display.o: /usr/include/sys/_posix_availability.h /usr/include/Availability.h
display.o: /usr/include/AvailabilityInternal.h /usr/include/_types.h
display.o: /usr/include/sys/_types.h /usr/include/machine/_types.h
display.o: /usr/include/i386/_types.h /usr/include/secure/_stdio.h
display.o: /usr/include/secure/_common.h /usr/include/stdlib.h
display.o: /usr/include/sys/wait.h /usr/include/sys/signal.h
display.o: /usr/include/sys/appleapiopts.h /usr/include/machine/signal.h
display.o: /usr/include/i386/signal.h /usr/include/i386/_structs.h
display.o: /usr/include/sys/_structs.h /usr/include/sys/resource.h
display.o: /usr/include/machine/endian.h /usr/include/i386/endian.h
display.o: /usr/include/sys/_endian.h /usr/include/libkern/_OSByteOrder.h
display.o: /usr/include/libkern/i386/_OSByteOrder.h /usr/include/alloca.h
display.o: /usr/include/machine/types.h /usr/include/i386/types.h
display.o: /usr/include/unistd.h /usr/include/sys/unistd.h
display.o: /usr/include/sys/select.h /usr/include/sys/_select.h
display.o: /usr/include/fcntl.h /usr/include/sys/fcntl.h
display.o: /usr/include/string.h /usr/include/strings.h
display.o: /usr/include/secure/_string.h /usr/include/errno.h
display.o: /usr/include/sys/errno.h /usr/include/sys/stat.h driftnet.h
display.o: /usr/include/sys/types.h /usr/include/sys/socket.h
display.o: /usr/include/machine/_param.h /usr/include/i386/_param.h
display.o: /usr/include/netinet/in.h /usr/include/stdint.h
display.o: /usr/include/netinet6/in6.h /usr/include/arpa/inet.h
display.o: /usr/include/sys/time.h /usr/include/time.h
display.o: /usr/include/_structs.h img.h
playaudio.o: /usr/include/sys/types.h /usr/include/sys/appleapiopts.h
playaudio.o: /usr/include/sys/cdefs.h /usr/include/sys/_symbol_aliasing.h
playaudio.o: /usr/include/sys/_posix_availability.h
playaudio.o: /usr/include/machine/types.h /usr/include/i386/types.h
playaudio.o: /usr/include/i386/_types.h /usr/include/sys/_types.h
playaudio.o: /usr/include/machine/_types.h /usr/include/machine/endian.h
playaudio.o: /usr/include/i386/endian.h /usr/include/sys/_endian.h
playaudio.o: /usr/include/libkern/_OSByteOrder.h
playaudio.o: /usr/include/libkern/i386/_OSByteOrder.h
playaudio.o: /usr/include/sys/_structs.h /usr/include/errno.h
playaudio.o: /usr/include/sys/errno.h /usr/include/pthread.h
playaudio.o: /usr/include/_types.h /usr/include/pthread_impl.h
playaudio.o: /usr/include/sched.h /usr/include/time.h /usr/include/_structs.h
playaudio.o: /usr/include/Availability.h /usr/include/AvailabilityInternal.h
playaudio.o: /usr/include/signal.h /usr/include/sys/signal.h
playaudio.o: /usr/include/machine/signal.h /usr/include/i386/signal.h
playaudio.o: /usr/include/i386/_structs.h /usr/include/stdio.h
playaudio.o: /usr/include/secure/_stdio.h /usr/include/secure/_common.h
playaudio.o: /usr/include/stdlib.h /usr/include/sys/wait.h
playaudio.o: /usr/include/sys/resource.h /usr/include/alloca.h
playaudio.o: /usr/include/string.h /usr/include/strings.h
playaudio.o: /usr/include/secure/_string.h /usr/include/unistd.h
playaudio.o: /usr/include/sys/unistd.h /usr/include/sys/select.h
playaudio.o: /usr/include/sys/_select.h driftnet.h /usr/include/sys/socket.h
playaudio.o: /usr/include/machine/_param.h /usr/include/i386/_param.h
playaudio.o: /usr/include/netinet/in.h /usr/include/stdint.h
playaudio.o: /usr/include/netinet6/in6.h /usr/include/arpa/inet.h
playaudio.o: /usr/include/sys/time.h
connection.o: /usr/include/assert.h /usr/include/sys/cdefs.h
connection.o: /usr/include/sys/_symbol_aliasing.h
connection.o: /usr/include/sys/_posix_availability.h /usr/include/stdio.h
connection.o: /usr/include/Availability.h /usr/include/AvailabilityInternal.h
connection.o: /usr/include/_types.h /usr/include/sys/_types.h
connection.o: /usr/include/machine/_types.h /usr/include/i386/_types.h
connection.o: /usr/include/secure/_stdio.h /usr/include/secure/_common.h
connection.o: /usr/include/stdlib.h /usr/include/sys/wait.h
connection.o: /usr/include/sys/signal.h /usr/include/sys/appleapiopts.h
connection.o: /usr/include/machine/signal.h /usr/include/i386/signal.h
connection.o: /usr/include/i386/_structs.h /usr/include/sys/_structs.h
connection.o: /usr/include/sys/resource.h /usr/include/machine/endian.h
connection.o: /usr/include/i386/endian.h /usr/include/sys/_endian.h
connection.o: /usr/include/libkern/_OSByteOrder.h
connection.o: /usr/include/libkern/i386/_OSByteOrder.h /usr/include/alloca.h
connection.o: /usr/include/machine/types.h /usr/include/i386/types.h
connection.o: /usr/include/string.h /usr/include/strings.h
connection.o: /usr/include/secure/_string.h /usr/include/time.h
connection.o: /usr/include/_structs.h driftnet.h /usr/include/sys/types.h
connection.o: /usr/include/sys/socket.h /usr/include/machine/_param.h
connection.o: /usr/include/i386/_param.h /usr/include/netinet/in.h
connection.o: /usr/include/stdint.h /usr/include/netinet6/in6.h
connection.o: /usr/include/arpa/inet.h /usr/include/sys/time.h
connection.o: /usr/include/sys/_select.h
media.o: /usr/include/assert.h /usr/include/sys/cdefs.h
media.o: /usr/include/sys/_symbol_aliasing.h
media.o: /usr/include/sys/_posix_availability.h /usr/include/dirent.h
media.o: /usr/include/_types.h /usr/include/sys/_types.h
media.o: /usr/include/machine/_types.h /usr/include/i386/_types.h
media.o: /usr/include/sys/dirent.h /usr/include/Availability.h
media.o: /usr/include/AvailabilityInternal.h /usr/include/fcntl.h
media.o: /usr/include/sys/fcntl.h /usr/include/stdio.h
media.o: /usr/include/secure/_stdio.h /usr/include/secure/_common.h
media.o: /usr/include/stdlib.h /usr/include/sys/wait.h
media.o: /usr/include/sys/signal.h /usr/include/sys/appleapiopts.h
media.o: /usr/include/machine/signal.h /usr/include/i386/signal.h
media.o: /usr/include/i386/_structs.h /usr/include/sys/_structs.h
media.o: /usr/include/sys/resource.h /usr/include/machine/endian.h
media.o: /usr/include/i386/endian.h /usr/include/sys/_endian.h
media.o: /usr/include/libkern/_OSByteOrder.h
media.o: /usr/include/libkern/i386/_OSByteOrder.h /usr/include/alloca.h
media.o: /usr/include/machine/types.h /usr/include/i386/types.h
media.o: /usr/include/string.h /usr/include/strings.h
media.o: /usr/include/secure/_string.h /usr/include/time.h
media.o: /usr/include/_structs.h /usr/include/unistd.h
media.o: /usr/include/sys/unistd.h /usr/include/sys/select.h
media.o: /usr/include/sys/_select.h driftnet.h /usr/include/sys/types.h
media.o: /usr/include/sys/socket.h /usr/include/machine/_param.h
media.o: /usr/include/i386/_param.h /usr/include/netinet/in.h
media.o: /usr/include/stdint.h /usr/include/netinet6/in6.h
media.o: /usr/include/arpa/inet.h /usr/include/sys/time.h
